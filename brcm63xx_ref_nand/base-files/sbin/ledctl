#!/bin/sh

local name=$1
local status=$2

#ubus call leds set  '{"state":"test"}'

name=$(echo $name | tr '[A-Z]' '[a-z]')
status=$(echo $status | tr '[A-Z]' '[a-z]')

case $name in
	broadband) db get hw.board.lednames | grep -iq broadband && name="dsl" || exit ;;
	ethernet) name="lan" ;;
	wireless) name="wifi" ;;
	tel*|voice) name="voice1" ;;
	video) name="tv" ;;
	power) name="status" ;;
esac

case $status in
	on) status="ok" ;;
	fail) status="error" ;;
	blink) status="notice" ;;
esac

ubus call led.$name set '{"state":"'$status'"}' &

